import{j as e}from"./vendor-motion-B0Ve9eKL.js";import{r as g,C as b,a6 as N,a7 as y,ac as v,P as w}from"./vendor-icons-UhyBKR_p.js";import{D as k,B as C,L as z,C as A,A as B,f as D,g as P,a as L,b as S,c as T,d as $,e as E}from"./vendor-charts-Sc5j6xUe.js";import{g as o,a as I}from"./index-CBwzKKcI.js";import"./vendor-firebase-grCQuNSa.js";A.register(B,D,P,L,S,T,$,E);const H=({budgets:t=[],onAddBudget:h,onEditBudget:m})=>{const[s,u]=g.useState("pie"),i=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(a),p=t.reduce((a,l)=>a+(l.current_spent||0),0),d={labels:t.map(a=>a.category),datasets:[{label:"Terpakai",data:t.map(a=>a.current_spent||0),backgroundColor:t.map(a=>o(a.category)+(s==="pie"?"99":"44")),borderColor:t.map(a=>o(a.category)),borderWidth:2,borderRadius:s==="bar"?8:0,tension:.4,fill:s==="line",pointBackgroundColor:t.map(a=>o(a.category))}]},x={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},cutout:s==="pie"?"70%":void 0,scales:s==="pie"?{}:{x:{grid:{display:!1},ticks:{color:"#94a3b8",font:{size:10,weight:"bold"}}},y:{display:!1,grid:{display:!1}}}};return e.jsxs("div",{className:"px-6 space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("header",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Anggaran"}),e.jsx("div",{className:"flex bg-white/5 p-1 rounded-xl border border-white/10 shrink-0",children:[{id:"pie",icon:e.jsx(b,{size:14})},{id:"bar",icon:e.jsx(N,{size:14})},{id:"line",icon:e.jsx(y,{size:14})}].map(a=>e.jsx("button",{onClick:()=>u(a.id),className:`p-2 rounded-lg transition-all ${s===a.id?"bg-primary text-background-dark shadow-lg shadow-primary/20":"text-slate-500 hover:text-white"}`,children:a.icon},a.id))})]}),e.jsxs("div",{className:"glass-card p-6 rounded-[2.5rem] flex flex-col items-center justify-center relative shadow-xl shadow-black/20 overflow-hidden",children:[e.jsx("div",{className:"w-full h-48 flex items-center justify-center relative",children:t.length>0?e.jsxs(e.Fragment,{children:[s==="pie"&&e.jsx(k,{data:d,options:x}),s==="bar"&&e.jsx(C,{data:d,options:x}),s==="line"&&e.jsx(z,{data:d,options:x}),s==="pie"&&e.jsxs("div",{className:"absolute flex flex-col items-center",children:[e.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest",children:"Total Pakai"}),e.jsx("p",{className:"text-lg font-black text-slate-100",children:i(p)})]})]}):e.jsx("div",{className:"size-full rounded-[2rem] border-4 border-dashed border-white/5 flex items-center justify-center text-center p-4",children:e.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-[0.2em]",children:"Belum Ada Anggaran"})})}),s!=="pie"&&t.length>0&&e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest",children:"Total Pengeluaran Teranggarkan"}),e.jsx("p",{className:"text-xl font-black text-primary",children:i(p)})]})]}),e.jsxs("div",{className:"space-y-4 pb-24",children:[t.map(a=>{const l=a.current_spent||0,n=Math.round(l/a.limit*100),f=n>=100,r=n>=85,c=o(a.category),j=I(a.iconName||"ShoppingBag",20);return e.jsxs("div",{className:"glass-card p-5 rounded-3xl border-white/5 relative group",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"size-12 rounded-2xl flex items-center justify-center",style:{backgroundColor:`${c}1a`,color:c},children:j}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-100 capitalize",children:a.category}),e.jsxs("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider",children:["Batas: ",i(a.limit)]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:`font-black text-lg ${r?"text-red-400":"text-slate-100"}`,children:[n,"%"]})}),e.jsx("button",{onClick:()=>m&&m(a),className:"size-8 glass-card border-white/10 rounded-full flex items-center justify-center text-white/50 hover:text-white hover:bg-white/5 transition-all opacity-0 group-hover:opacity-100",children:e.jsx(v,{size:14})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-xs font-bold",children:[e.jsx("span",{className:"text-slate-400",children:"Terpakai"}),e.jsx("span",{className:r?"text-red-400":"text-slate-200",children:i(l)})]}),e.jsx("div",{className:"h-2 w-full bg-white/5 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-1000 rounded-full ${r?"bg-red-400":""}`,style:{width:`${Math.min(n,100)}%`,backgroundColor:r?void 0:c,boxShadow:`0 0 10px ${r?"rgba(248,113,113,0.3)":`${c}4d`}`}})}),r&&e.jsx("p",{className:"text-[10px] text-red-400 font-bold animate-pulse",children:f?"Sudah melewati batas (Boncos)!":"Hampir melewati batas!"})]})]},a.id)}),e.jsxs("button",{onClick:h,className:"w-full glass-card border-dashed border-white/10 p-5 rounded-3xl flex items-center justify-center gap-2 text-slate-500 hover:text-primary transition-all group",children:[e.jsx(w,{size:20,className:"group-hover:scale-110 transition-transform"}),e.jsx("span",{className:"text-xs font-black uppercase tracking-widest",children:"Atur Anggaran Baru"})]})]})]})};export{H as default};
