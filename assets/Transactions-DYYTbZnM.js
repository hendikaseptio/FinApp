import{j as e,A,m as g}from"./vendor-motion-B0Ve9eKL.js";import{r as c,a9 as F,aa as y,ab as R,a8 as T,A as L,a5 as P,X as W}from"./vendor-icons-UhyBKR_p.js";import{b as E,a as M,C as j,c as w}from"./index-CBwzKKcI.js";import"./vendor-firebase-grCQuNSa.js";const H=({transactions:m=[],budgets:v=[],wallets:x=[],onEditTransaction:u,onBack:k})=>{const[r,N]=c.useState(""),[D,i]=c.useState(!1),[a,l]=c.useState({walletId:"all",startDate:"",endDate:"",type:"all"}),o=t=>{const s=x.find(d=>d.id===t);return s?s.name:"Dompet"},I=t=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(t),p=c.useMemo(()=>m.filter(t=>{var f,b;const s=r===""||((f=t.note)==null?void 0:f.toLowerCase().includes(r.toLowerCase()))||((b=t.category)==null?void 0:b.toLowerCase().includes(r.toLowerCase())),d=a.walletId==="all"||t.walletId===a.walletId||t.targetWalletId===a.walletId,C=a.type==="all"||t.type===a.type,h=new Date(t.date),z=!a.startDate||h>=new Date(a.startDate),S=!a.endDate||h<=new Date(a.endDate);return s&&d&&C&&z&&S}).sort((t,s)=>new Date(s.date)-new Date(t.date)),[m,r,a]),n=Object.values(a).filter(t=>t!=="all"&&t!=="").length;return e.jsxs("div",{className:"px-6 space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-24",children:[e.jsx("header",{className:"flex justify-between items-center",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:k,className:"size-10 flex items-center justify-center rounded-xl glass-card hover:bg-white/5 transition-all active:scale-90",children:e.jsx(F,{size:20})}),e.jsx("h2",{className:"text-2xl font-bold",children:"Riwayat"})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(y,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500",size:18}),e.jsx("input",{type:"text",placeholder:"Cari transaksi...",value:r,onChange:t=>N(t.target.value),className:"w-full bg-white/5 border border-white/10 rounded-2xl py-4 pl-12 pr-4 text-sm font-bold placeholder:text-slate-600 focus:outline-none focus:border-primary/50 transition-all shadow-inner"})]}),e.jsxs("button",{onClick:()=>i(!0),className:`size-14 rounded-2xl flex items-center justify-center border transition-all active:scale-95 relative ${n>0?"bg-primary/10 border-primary text-primary":"glass-card border-white/10 text-slate-400 hover:text-white"}`,children:[e.jsx(R,{size:20,strokeWidth:2.5}),n>0&&e.jsx("span",{className:"absolute -top-1 -right-1 size-5 bg-primary text-background-dark text-[10px] font-black rounded-full flex items-center justify-center border-4 border-background-dark",children:n})]})]}),e.jsx("div",{className:"space-y-3",children:p.length===0?e.jsxs("div",{className:"text-center py-20 text-slate-500 glass-card rounded-3xl border-white/5 border-dashed",children:[e.jsx("div",{className:"size-16 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(y,{size:32,className:"opacity-20"})}),e.jsx("p",{className:"text-sm font-bold uppercase tracking-widest px-6",children:"Tidak ada transaksi yang cocok"}),n>0&&e.jsx("button",{onClick:()=>l({walletId:"all",startDate:"",endDate:"",type:"all"}),className:"mt-4 text-primary text-[10px] font-black uppercase tracking-widest hover:underline",children:"Reset Filter"})]}):p.map(t=>{const s=E(t,v);return e.jsxs("div",{onClick:()=>u&&u(t),className:"glass-card p-4 rounded-2xl flex items-center justify-between hover:bg-white/5 active:scale-[0.98] transition-all cursor-pointer group border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"size-12 rounded-xl flex items-center justify-center transition-transform group-hover:scale-110 shadow-lg",style:{backgroundColor:`${s.color}1a`,color:s.color},children:M(s.icon,20)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-sm text-slate-100",children:t.note||t.category}),e.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider",children:new Date(t.date).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-black flex items-center justify-end gap-1",style:{color:s.color},children:[t.type==="income"?e.jsx(T,{size:14,strokeWidth:3}):t.type==="transfer"?e.jsx(L,{size:12}):e.jsx(P,{size:14,strokeWidth:3}),I(t.amount)]}),e.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-[0.1em]",children:t.type==="transfer"?`${o(t.walletId)} â†’ ${o(t.targetWalletId)}`:o(t.walletId)})]})]},t.id)})}),e.jsx(A,{children:D&&e.jsxs("div",{className:"fixed inset-0 z-[120] flex items-end sm:items-center justify-center",children:[e.jsx(g.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>i(!1),className:"absolute inset-0 bg-background-dark/80 backdrop-blur-sm"}),e.jsxs(g.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},className:"relative w-full max-w-lg glass-card rounded-t-[2.5rem] sm:rounded-[2.5rem] p-8 space-y-8 bg-neutral-950/90",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-black tracking-tight",children:"Filter Riwayat"}),e.jsx("button",{onClick:()=>i(!1),className:"size-10 rounded-full flex items-center justify-center glass-card hover:bg-white/10",children:e.jsx(W,{size:20})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(j,{label:"PILIH DOMPET",options:[{label:"Semua Dompet",value:"all"},...x.map(t=>({label:t.name,value:t.id}))],value:a.walletId,onChange:t=>l({...a,walletId:t})}),e.jsx(j,{label:"TIPE TRANSAKSI",options:[{label:"Semua Tipe",value:"all"},{label:"Pemasukan",value:"income"},{label:"Pengeluaran",value:"expense"},{label:"Transfer",value:"transfer"}],value:a.type,onChange:t=>l({...a,type:t})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(w,{label:"MULAI DARI",value:a.startDate,onChange:t=>l({...a,startDate:t})}),e.jsx(w,{label:"SAMPAI",value:a.endDate,onChange:t=>l({...a,endDate:t})})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:()=>{l({walletId:"all",startDate:"",endDate:"",type:"all"}),i(!1)},className:"flex-1 py-5 rounded-2xl bg-white/5 font-black text-xs uppercase tracking-widest hover:bg-white/10 transition-all",children:"Reset"}),e.jsx("button",{onClick:()=>i(!1),className:"flex-[2] py-5 rounded-2xl bg-primary text-background-dark font-black text-xs uppercase tracking-widest shadow-lg shadow-primary/20 hover:scale-[1.02] active:scale-[0.98] transition-all",children:"Terapkan Filter"})]})]})]})})]})};export{H as default};
