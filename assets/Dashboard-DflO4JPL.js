import{j as e,A as U,m as _}from"./vendor-motion-DUxUSJjH.js";import{r as v,W,s as F,a4 as I,P as $,J as Y,K as J,a5 as K,a6 as q,C as G,a7 as H,A as Q,o as V,p as X,q as Z}from"./vendor-icons-BxzTWXML.js";import{B as ee,L as te,P as se,C as ae,a as re,b as ie,c as le,d as ne,e as oe,A as ce,p as de,f as xe,g as me}from"./vendor-charts-B5JzHYtI.js";import{g as he,a as P,b as pe}from"./index-D3sjV4uV.js";import"./vendor-firebase-GE3FQjWF.js";ae.register(re,ie,le,ne,oe,ce,de,xe,me);const Ne=({wallets:r=[],transactions:i=[],budgets:g=[],onSeeAllTransactions:j,onIsiSaldo:u,onTransfer:w,setActiveTab:M})=>{const[f,k]=v.useState(0),[D,E]=v.useState("month"),[x,O]=v.useState("bar"),R=r.reduce((t,a)=>t+(Number(a.balance)||0),0),y=t=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(t),z=v.useMemo(()=>{const t=new Date;let a=[],h=[],l=[];if(D==="week"?(a=["Sen","Sel","Rab","Kam","Jum","Sab","Min"],h=Array(7).fill(0),l=Array(7).fill(0),i.forEach(s=>{const n=new Date(s.date);if((t-n)/(1e3*60*60*24)<7){const p=(n.getDay()+6)%7;s.type==="income"&&(h[p]+=Number(s.amount)),s.type==="expense"&&(l[p]+=Number(s.amount))}})):D==="month"?(a=["Mgg 1","Mgg 2","Mgg 3","Mgg 4"],h=Array(4).fill(0),l=Array(4).fill(0),i.forEach(s=>{const n=new Date(s.date);if(n.getMonth()===t.getMonth()&&n.getFullYear()===t.getFullYear()){const m=Math.min(Math.floor((n.getDate()-1)/7),3);s.type==="income"&&(h[m]+=Number(s.amount)),s.type==="expense"&&(l[m]+=Number(s.amount))}})):(a=["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agu","Sep","Okt","Nov","Des"],h=Array(12).fill(0),l=Array(12).fill(0),i.forEach(s=>{const n=new Date(s.date);if(n.getFullYear()===t.getFullYear()){const m=n.getMonth();s.type==="income"&&(h[m]+=Number(s.amount)),s.type==="expense"&&(l[m]+=Number(s.amount))}})),x==="pie"){const s=h.reduce((m,p)=>m+p,0),n=l.reduce((m,p)=>m+p,0);return{labels:["Pemasukan","Pengeluaran"],datasets:[{data:[s,n],backgroundColor:["#13ec5b","#fbbf24"],borderWidth:0,hoverOffset:10}]}}return{labels:a,datasets:[{label:"Pemasukan",data:h,backgroundColor:"#13ec5b",borderColor:"#13ec5b",tension:.4,fill:x==="line",pointBackgroundColor:"#13ec5b",borderRadius:8,barThickness:12},{label:"Pengeluaran",data:l,backgroundColor:x==="line"?"#fbbf2488":"#fbbf24",borderColor:"#fbbf24",tension:.4,fill:x==="line",pointBackgroundColor:"#fbbf24",borderRadius:8,barThickness:12}]}},[i,D,x]),A={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:x==="pie",position:"bottom",labels:{color:"#94a3b8",font:{size:10,weight:"bold"}}},tooltip:{backgroundColor:"rgba(15, 23, 42, 0.9)",titleFont:{size:10,weight:"bold"},bodyFont:{size:12,weight:"black"},padding:12,cornerRadius:12,displayColors:!1,callbacks:{label:t=>y(t.raw)}}},scales:x==="pie"?{}:{x:{grid:{display:!1},ticks:{color:"#94a3b8",font:{size:10,weight:"bold"}}},y:{display:!1,grid:{display:!1}}}},N=v.useMemo(()=>{if(!i.length)return{percent:0,label:"No Data",isUp:!0};const t=new Date,a=new Date(t.getFullYear(),t.getMonth(),t.getDate()),h=new Date(Math.min(...i.map(c=>new Date(c.date)))),l=Math.ceil((t-h)/(1e3*60*60*24)),s=(c,b)=>i.filter(d=>{const o=new Date(d.date);return o>=c&&o<b}).reduce((d,o)=>o.type==="income"?d+Number(o.amount):o.type==="expense"?d-Number(o.amount):d,0);if(l<7){const c=new Date(a);c.setDate(c.getDate()-1);const b=s(a,new Date(t.getTime()+1)),d=s(c,a);if(d===0)return{percent:b>0?100:0,label:"vs Kemarin",isUp:b>=0};const o=(b-d)/Math.abs(d)*100;return{percent:Math.abs(Math.round(o)),label:"vs Kemarin",isUp:o>=0}}if(l<30){const c=new Date(a);c.setDate(c.getDate()-7);const b=new Date(c);b.setDate(b.getDate()-7);const d=s(c,new Date(t.getTime()+1)),o=s(b,c);if(o===0)return{percent:d>0?100:0,label:"vs Minggu Lalu",isUp:d>=0};const T=(d-o)/Math.abs(o)*100;return{percent:Math.abs(Math.round(T)),label:"vs Minggu Lalu",isUp:T>=0}}const n=new Date(t.getFullYear(),t.getMonth(),1),m=new Date(t.getFullYear(),t.getMonth()-1,1),p=s(n,new Date(t.getTime()+1)),S=s(m,n);if(S===0)return{percent:p>0?100:0,label:"vs Bulan Lalu",isUp:p>=0};const L=(p-S)/Math.abs(S)*100;return{percent:Math.abs(Math.round(L)),label:"vs Bulan Lalu",isUp:L>=0}},[i]),C=t=>{const a=(f+t+(r.length+1))%(r.length+1);k(a)},B=t=>{switch(t==null?void 0:t.toLowerCase()){case"bank":return e.jsx(Z,{size:20});case"saving":return e.jsx(X,{size:20});case"business":return e.jsx(V,{size:20});default:return e.jsx(W,{size:20})}};return e.jsxs("div",{className:"px-6 space-y-8 animate-in fade-in duration-500 overflow-x-hidden pt-4",children:[e.jsxs("section",{className:"relative group",children:[e.jsxs("div",{className:"relative h-[240px] w-full flex items-center justify-center",children:[e.jsx(U,{initial:!1,mode:"wait",children:e.jsx(_.div,{drag:"x",dragConstraints:{left:0,right:0},dragElastic:1,onDragEnd:(t,{offset:a,velocity:h})=>{const l=a.x;l<-50?C(1):l>50&&C(-1)},initial:{x:100,opacity:0,scale:.9},animate:{x:0,opacity:1,scale:1},exit:{x:-100,opacity:0,scale:.9},transition:{type:"spring",stiffness:300,damping:30},className:"absolute inset-0 cursor-grab active:cursor-grabbing",children:f===0?e.jsxs("div",{className:"h-full glass-card rounded-[2.5rem] p-8 relative overflow-hidden flex flex-col justify-between shadow-2xl shadow-primary/10 border-white/5",children:[e.jsx("div",{className:"absolute -top-24 -right-24 size-64 bg-primary/20 blur-[80px] rounded-full"}),e.jsx("div",{className:"absolute -bottom-24 -left-24 size-64 bg-amber-accent/10 blur-[80px] rounded-full"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-[10px] font-bold tracking-[0.2em] uppercase",children:"TOTAL SALDO"}),e.jsx("div",{className:"h-1 w-8 bg-primary mt-1 rounded-full"})]}),e.jsx("div",{className:"size-10 glass-card rounded-xl flex items-center justify-center text-primary border-primary/20",children:e.jsx(W,{size:20})})]}),e.jsx("h2",{className:"text-4xl font-black tracking-tighter mb-2",children:y(R)}),e.jsxs("div",{className:`flex w-fit items-center gap-2 font-bold px-3 py-1 rounded-full border transition-all ${N.isUp?"bg-primary/10 text-primary border-primary/20":"bg-red-500/10 text-red-400 border-red-500/20"}`,children:[N.isUp?e.jsx(F,{size:12,strokeWidth:3}):e.jsx(I,{size:12,strokeWidth:3}),e.jsxs("p",{className:"text-[10px] uppercase truncate",children:[N.percent,"% ",N.isUp?"Grow up":"Down"," ",N.label]})]})]}),e.jsxs("div",{className:"relative z-10 flex gap-4 mt-3",children:[e.jsxs("button",{onClick:u,className:"flex-1 bg-primary text-background-dark font-black py-4 rounded-[1.25rem] flex items-center justify-center gap-2 hover:opacity-90 active:scale-95 transition-all shadow-lg shadow-primary/20 text-[10px] uppercase tracking-wider",children:[e.jsx($,{size:16,strokeWidth:4})," ISI SALDO"]}),e.jsxs("button",{onClick:w,className:"flex-1 glass-card border-white/10 text-white font-black py-4 rounded-[1.25rem] flex items-center justify-center gap-2 hover:bg-white/5 active:scale-95 transition-all text-[10px] uppercase tracking-wider",children:[e.jsx(F,{size:16,strokeWidth:4})," TRANSFER"]})]})]}):e.jsx(ue,{wallet:r[f-1],formatIDR:y,getWalletIcon:B,onIsiSaldo:u,onTransfer:w})},f)}),e.jsx("button",{onClick:()=>C(-1),className:"absolute left-[-15px] z-20 size-10 glass-card rounded-full flex items-center justify-center text-white/50 hover:text-white hover:bg-white/5 sm:flex hidden",children:e.jsx(Y,{size:20})}),e.jsx("button",{onClick:()=>C(1),className:"absolute right-[-15px] z-20 size-10 glass-card rounded-full flex items-center justify-center text-white/50 hover:text-white hover:bg-white/5 sm:flex hidden",children:e.jsx(J,{size:20})})]}),e.jsx("div",{className:"flex justify-center gap-2 mt-6",children:Array.from({length:r.length+1}).map((t,a)=>e.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${f===a?"w-8 bg-primary shadow-[0_0_8px_rgba(19,236,91,0.5)]":"w-2 bg-white/10"}`},a))})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-4 px-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Analisis Keuangan"}),e.jsx("div",{className:"flex bg-white/5 p-1 rounded-xl",children:["week","month","year"].map(t=>e.jsx("button",{onClick:()=>E(t),className:`px-3 py-1.5 text-[10px] font-black uppercase tracking-widest rounded-lg transition-all ${D===t?"bg-primary text-background-dark":"text-slate-400"}`,children:t==="week"?"Minggu":t==="month"?"Bulan":"Tahun"},t))})]}),e.jsx("div",{className:"flex items-center gap-2",children:[{id:"bar",icon:e.jsx(K,{size:14}),label:"Bar"},{id:"line",icon:e.jsx(q,{size:14}),label:"Line"},{id:"pie",icon:e.jsx(G,{size:14}),label:"Pie"}].map(t=>e.jsxs("button",{onClick:()=>O(t.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${x===t.id?"bg-white/10 text-white border border-white/20":"text-slate-500 grayscale opacity-50"}`,children:[t.icon," ",t.label]},t.id))})]}),e.jsxs("div",{className:"glass-card p-6 rounded-[2rem] border-white/5 h-[260px] relative overflow-hidden",children:[x==="bar"&&e.jsx(ee,{data:z,options:A}),x==="line"&&e.jsx(te,{data:z,options:A}),x==="pie"&&e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx("div",{className:"size-48",children:e.jsx(se,{data:z,options:A})})})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-1",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Progres Anggaran"}),e.jsx("button",{onClick:()=>M("stats"),className:"text-primary text-[10px] font-black uppercase tracking-widest",children:"Lihat Semua"})]}),e.jsx("div",{className:"flex gap-4 overflow-x-auto no-scrollbar pb-2",children:g.length>0?g.slice(0,3).map(t=>e.jsx(be,{icon:P(t.iconName||"ShoppingBag",20),label:t.category,spent:y(t.current_spent||0),percent:Math.min(Math.round((t.current_spent||0)/t.limit*100),100),color:he(t.category)},t.id)):e.jsx("div",{className:"w-full py-8 glass-card rounded-2xl text-center text-slate-500 text-[10px] font-bold uppercase tracking-widest border-white/5 border-dashed border-2",children:"No active budgets"})})]}),e.jsxs("section",{className:"space-y-4 pb-28",children:[e.jsxs("div",{className:"flex items-center justify-between px-1",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Transaksi Terakhir"}),e.jsx("button",{onClick:j,className:"text-primary text-[10px] font-black uppercase tracking-widest",children:"Lihat Semua"})]}),e.jsxs("div",{className:"space-y-3",children:[i.slice(0,5).map(t=>{const a=pe(t,g);return e.jsxs("div",{className:"glass-card p-4 rounded-2xl flex items-center justify-between border-white/5 hover:bg-white/5 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"size-12 rounded-xl flex items-center justify-center shadow-md",style:{backgroundColor:`${a.color}1a`,color:a.color},children:P(a.icon,20)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-sm text-slate-100",children:t.note||t.category}),e.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider",children:new Date(t.date).toLocaleDateString("id-ID",{day:"numeric",month:"short"})})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-black text-sm flex items-center justify-end gap-1",style:{color:a.color},children:[t.type==="income"?e.jsx(H,{size:14,strokeWidth:3}):t.type==="transfer"?e.jsx(Q,{size:12}):e.jsx(I,{size:14,strokeWidth:3}),y(t.amount)]})})]},t.id)}),i.length===0&&e.jsx("div",{className:"text-center py-10 glass-card rounded-2xl text-slate-500 text-[10px] font-bold uppercase tracking-widest border-white/5 border-dashed border-2",children:"No recent transactions"})]})]})]})},ue=({wallet:r,formatIDR:i,getWalletIcon:g,onIsiSaldo:j,onTransfer:u})=>{var f,k;const w=["from-blue-600/40 to-indigo-600/10","from-purple-600/40 to-pink-600/10","from-emerald-600/40 to-teal-600/10"],M=(((f=r.id)==null?void 0:f.length)||0)%w.length;return e.jsxs("div",{className:`h-full glass-card rounded-[2.5rem] p-8 relative overflow-hidden flex flex-col justify-between border-2 border-white/5 bg-gradient-to-br ${w[M]}`,children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-200 text-[10px] font-bold tracking-[0.2em] uppercase",children:r.name}),e.jsxs("p",{className:"text-[8px] text-slate-400 font-mono mt-1 opacity-50 tracking-widest",children:["**** ",(k=r.id)==null?void 0:k.slice(-4)]})]}),e.jsx("div",{className:"size-10 bg-white/10 rounded-xl flex items-center justify-center text-white border border-white/10 backdrop-blur-md",children:g(r.type)})]}),e.jsx("h2",{className:"text-4xl font-black tracking-tighter mb-2 text-white",children:i(r.balance)}),e.jsxs("div",{className:"text-[10px] text-slate-300 font-bold uppercase tracking-widest opacity-80",children:[r.type||"Personal"," Wallet"]})]}),e.jsxs("div",{className:"relative z-10 flex gap-4 mt-3",children:[e.jsx("button",{onClick:j,className:"flex-1 bg-white/10 border border-white/10 text-white font-black py-4 rounded-[1.25rem] flex items-center justify-center gap-2 hover:bg-white/20 active:scale-95 transition-all text-[10px] backdrop-blur-md uppercase tracking-wider",children:"ISI SALDO"}),e.jsx("button",{onClick:u,className:"flex-1 bg-white/10 border border-white/10 text-white font-black py-4 rounded-[1.25rem] flex items-center justify-center gap-2 hover:bg-white/20 active:scale-95 transition-all text-[10px] backdrop-blur-md uppercase tracking-wider",children:"TRANSFER"})]})]})},be=({icon:r,label:i,spent:g,percent:j,color:u})=>e.jsxs("div",{className:"flex-shrink-0 w-48 glass-card rounded-2xl p-5 border-white/5 shadow-lg",children:[e.jsx("div",{className:"size-12 rounded-xl flex items-center justify-center mb-4 transition-transform hover:scale-110",style:{backgroundColor:`${u}1a`,color:u},children:r}),e.jsx("p",{className:"font-bold text-sm mb-1 truncate",children:i}),e.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 mb-3 font-bold uppercase tracking-wider",children:[e.jsx("span",{children:g}),e.jsxs("span",{children:[j,"%"]})]}),e.jsx("div",{className:"h-1.5 w-full bg-white/5 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full transition-all duration-1000",style:{width:`${j}%`,backgroundColor:u,boxShadow:`0 0 10px ${u}80`}})})]});export{Ne as default};
