import{j as e,A as E,m as S}from"./vendor-motion-CzpfVgIZ.js";import{r as o,al as J,a0 as H,a1 as C,am as U,_ as Q,ak as _,J as K,ag as X,$ as q}from"./vendor-icons-CKU70MxI.js";import{b as G,a as V,C as b}from"./index-CPd4PYJi.js";import"./vendor-firebase-4Wekvqsq.js";const ae=({transactions:f=[],budgets:I=[],wallets:j=[],onEditTransaction:w,onBack:z,activeMonth:d,activeYear:r,onDeleteMultiple:D})=>{const[u,A]=o.useState(""),[T,m]=o.useState(!1),[c,g]=o.useState(!1),[n,x]=o.useState([]),[l,i]=o.useState({walletId:"all",month:d,year:r,type:"all"});o.useEffect(()=>{i(t=>({...t,month:d,year:r}))},[d,r]);const y=t=>{const a=j.find(s=>s.id===t);return a?a.name:"Dompet"},F=t=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(t),h=o.useMemo(()=>f.filter(t=>{var k,N;const a=u===""||((k=t.note)==null?void 0:k.toLowerCase().includes(u.toLowerCase()))||((N=t.category)==null?void 0:N.toLowerCase().includes(u.toLowerCase())),s=l.walletId==="all"||t.walletId===l.walletId||t.targetWalletId===l.walletId,O=l.type==="all"||t.type===l.type,v=new Date(t.date),M=l.month==="all"||v.getMonth()===Number(l.month),B=l.year==="all"||v.getFullYear()===Number(l.year);return a&&s&&O&&M&&B}).sort((t,a)=>new Date(a.date)-new Date(t.date)),[f,u,l]),p=Object.entries(l).filter(([t,a])=>t==="month"&&a===d&&l.year===r||t==="year"&&a===r&&l.month===d?!1:a!=="all"&&a!=="").length,L=t=>{x(a=>a.includes(t)?a.filter(s=>s!==t):[...a,t])},R=()=>{n.length===h.length?x([]):x(h.map(t=>t.id))},P=()=>{const t=f.filter(a=>n.includes(a.id));D(t),g(!1),x([])},W=[{label:"Semua Bulan",value:"all"},{label:"Januari",value:0},{label:"Februari",value:1},{label:"Maret",value:2},{label:"April",value:3},{label:"Mei",value:4},{label:"Juni",value:5},{label:"Juli",value:6},{label:"Agustus",value:7},{label:"September",value:8},{label:"Oktober",value:9},{label:"November",value:10},{label:"Desember",value:11}],$=[{label:"Semua Tahun",value:"all"},...Array.from({length:5},(t,a)=>({label:(r-a+1).toString(),value:r-a+1}))];return e.jsxs("div",{className:"px-6 space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-24",children:[e.jsxs("header",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:z,className:"size-10 flex items-center justify-center rounded-xl glass-card hover:bg-white/5 transition-all active:scale-90",children:e.jsx(J,{size:20})}),e.jsx("h2",{className:"text-2xl font-bold",children:c?`Pilih (${n.length})`:"Riwayat"})]}),e.jsx("div",{className:"flex gap-2",children:c?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:R,className:"px-4 py-2 text-[10px] font-black uppercase tracking-widest text-primary hover:bg-primary/10 rounded-xl transition-all",children:n.length===h.length?"Batal Semua":"Semua"}),e.jsx("button",{onClick:()=>{g(!1),x([])},className:"px-4 py-2 text-[10px] font-black uppercase tracking-widest text-slate-400 hover:text-white transition-all",children:"Batal"})]}):e.jsx("button",{onClick:()=>g(!0),className:"px-4 py-2 text-[10px] font-black uppercase tracking-widest text-slate-400 hover:text-white transition-all bg-white/5 rounded-xl border border-white/10",children:"Pilih"})})]}),c&&n.length>0&&e.jsxs("button",{onClick:P,className:"w-full bg-red-500 text-white font-black py-4 rounded-2xl flex items-center justify-center gap-2 shadow-xl shadow-red-500/20 animate-in slide-in-from-top duration-300 uppercase tracking-widest text-xs",children:[e.jsx(H,{size:18}),"Hapus ",n.length," Transaksi"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(C,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500",size:18}),e.jsx("input",{type:"text",placeholder:"Cari transaksi...",value:u,onChange:t=>A(t.target.value),className:"w-full bg-white/5 border border-white/10 rounded-2xl py-4 pl-12 pr-4 text-sm font-bold placeholder:text-slate-600 focus:outline-none focus:border-primary/50 transition-all shadow-inner"})]}),e.jsxs("button",{onClick:()=>m(!0),className:`size-14 rounded-2xl flex items-center justify-center border transition-all active:scale-95 relative ${p>0?"bg-primary/10 border-primary text-primary":"glass-card border-white/10 text-slate-400 hover:text-white"}`,children:[e.jsx(U,{size:20,strokeWidth:2.5}),p>0&&e.jsx("span",{className:"absolute -top-1 -right-1 size-5 bg-primary text-background-dark text-[10px] font-black rounded-full flex items-center justify-center border-4 border-background-dark",children:p})]})]}),e.jsx("div",{className:"space-y-3",children:h.length===0?e.jsxs("div",{className:"text-center py-20 text-slate-500 glass-card rounded-3xl border-white/5 border-dashed",children:[e.jsx("div",{className:"size-16 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(C,{size:32,className:"opacity-20"})}),e.jsx("p",{className:"text-sm font-bold uppercase tracking-widest px-6",children:"Tidak ada transaksi yang cocok"}),p>0&&e.jsx("button",{onClick:()=>i({walletId:"all",month:currentMonth,year:currentYear,type:"all"}),className:"mt-4 text-primary text-[10px] font-black uppercase tracking-widest hover:underline",children:"Reset Filter"})]}):h.map(t=>{const a=G(t,I),s=n.includes(t.id);return e.jsxs("div",{onClick:()=>c?L(t.id):w&&w(t),className:`glass-card p-4 rounded-2xl flex items-center justify-between hover:bg-white/5 active:scale-[0.98] transition-all cursor-pointer group border-white/5 relative overflow-hidden ${s?"ring-2 ring-primary bg-primary/5":""}`,children:[c&&e.jsx("div",{className:"absolute inset-0 bg-primary/5 pointer-events-none"}),e.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[c?e.jsx("div",{className:`size-12 rounded-xl border-2 flex items-center justify-center transition-all ${s?"bg-primary border-primary text-background-dark":"border-white/10 bg-white/5 text-transparent"}`,children:e.jsx(Q,{size:20,strokeWidth:4})}):e.jsx("div",{className:"size-12 rounded-xl flex items-center justify-center transition-transform group-hover:scale-110 shadow-lg",style:{backgroundColor:`${a.color}1a`,color:a.color},children:V(a.icon,20)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-sm text-slate-100",children:t.note||t.category}),e.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider",children:new Date(t.date).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})})]})]}),e.jsxs("div",{className:"text-right relative z-10",children:[e.jsxs("p",{className:"font-black flex items-center justify-end gap-1",style:{color:a.color},children:[t.type==="income"?e.jsx(_,{size:14,strokeWidth:3}):t.type==="transfer"?e.jsx(K,{size:12}):e.jsx(X,{size:14,strokeWidth:3}),F(t.amount)]}),e.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-[0.1em]",children:t.type==="transfer"?`${y(t.walletId)} â†’ ${y(t.targetWalletId)}`:y(t.walletId)})]})]},t.id)})}),e.jsx(E,{children:T&&e.jsxs("div",{className:"fixed inset-0 z-[120] flex items-end sm:items-center justify-center",children:[e.jsx(S.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>m(!1),className:"absolute inset-0 bg-background-dark/80 backdrop-blur-sm"}),e.jsxs(S.div,{initial:{y:"100%",x:0},animate:{y:0,x:0},exit:{y:"100%",x:0},transition:{type:"spring",damping:25,stiffness:200},className:"relative w-full max-w-lg glass-card rounded-t-[2.5rem] sm:rounded-[2.5rem] p-8 space-y-8 bg-neutral-950/90 shadow-2xl border border-white/10",children:[e.jsx("div",{className:"w-12 h-1.5 bg-white/10 rounded-full mx-auto mb-2 sm:hidden"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-black tracking-tight",children:"Filter Riwayat"}),e.jsx("button",{onClick:()=>m(!1),className:"size-10 rounded-full flex items-center justify-center glass-card hover:bg-white/10",children:e.jsx(q,{size:20})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(b,{label:"PILIH DOMPET",options:[{label:"Semua Dompet",value:"all"},...j.map(t=>({label:t.name,value:t.id}))],value:l.walletId,onChange:t=>i({...l,walletId:t})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(b,{label:"BULAN",options:W,value:l.month,onChange:t=>i({...l,month:t})}),e.jsx(b,{label:"TAHUN",options:$,value:l.year,onChange:t=>i({...l,year:t})})]}),e.jsx(b,{label:"TIPE TRANSAKSI",options:[{label:"Semua Tipe",value:"all"},{label:"Pemasukan",value:"income"},{label:"Pengeluaran",value:"expense"},{label:"Transfer",value:"transfer"}],value:l.type,onChange:t=>i({...l,type:t})})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:()=>{i({walletId:"all",month:currentMonth,year:currentYear,type:"all"}),m(!1)},className:"flex-1 py-5 rounded-2xl bg-white/5 font-black text-xs uppercase tracking-widest hover:bg-white/10 transition-all",children:"Reset"}),e.jsx("button",{onClick:()=>m(!1),className:"flex-[2] py-5 rounded-2xl bg-primary text-background-dark font-black text-xs uppercase tracking-widest shadow-lg shadow-primary/20 hover:scale-[1.02] active:scale-[0.98] transition-all",children:"Terapkan"})]})]})]})})]})};export{ae as default};
