import{j as e,A as G,m as q}from"./vendor-motion-DQ2oF2Tq.js";import{r as j,W as F,v as O,a8 as B,P as H,C as Q,a as V,a9 as X,aa as Y,c as Z,ab as ee,A as te,s as se,t as ae,u as re}from"./vendor-icons-BcfTGjTB.js";import{B as ie,L as ne,P as le,C as oe,a as ce,b as de,c as xe,d as me,e as ue,A as pe,p as he,f as be,g as ge}from"./vendor-charts-D7ZIuN8r.js";import{g as fe,a as R,b as je}from"./index-DUyIjFaj.js";import"./vendor-firebase-4Wekvqsq.js";oe.register(ce,de,xe,me,ue,pe,he,be,ge);const ze=({wallets:c=[],transactions:l=[],budgets:f=[],activeMonth:d,activeYear:n,onSeeAllTransactions:D,onIsiSaldo:C,onTransfer:w,setActiveTab:z})=>{const[y,U]=j.useState(0),[M,$]=j.useState("month"),[m,_]=j.useState("bar"),I=d===new Date().getMonth()&&n===new Date().getFullYear(),J=c.reduce((t,s)=>t+(Number(s.balance)||0),0),N=t=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(t),A=j.useMemo(()=>{let t=[],s=[],o=[];if(M==="week"?(t=["Sen","Sel","Rab","Kam","Jum","Sab","Min"],s=Array(7).fill(0),o=Array(7).fill(0),l.forEach(a=>{const r=new Date(a.date);if(r.getMonth()===d&&r.getFullYear()===n){const i=(r.getDay()+6)%7;a.type==="income"&&(s[i]+=Number(a.amount)),a.type==="expense"&&(o[i]+=Number(a.amount))}})):M==="month"?(t=["Mgg 1","Mgg 2","Mgg 3","Mgg 4"],s=Array(4).fill(0),o=Array(4).fill(0),l.forEach(a=>{const r=new Date(a.date);if(r.getMonth()===d&&r.getFullYear()===n){const i=Math.min(Math.floor((r.getDate()-1)/7),3);a.type==="income"&&(s[i]+=Number(a.amount)),a.type==="expense"&&(o[i]+=Number(a.amount))}})):(t=["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agu","Sep","Okt","Nov","Des"],s=Array(12).fill(0),o=Array(12).fill(0),l.forEach(a=>{const r=new Date(a.date);if(r.getFullYear()===n){const i=r.getMonth();a.type==="income"&&(s[i]+=Number(a.amount)),a.type==="expense"&&(o[i]+=Number(a.amount))}})),m==="pie"){const a=s.reduce((i,h)=>i+h,0),r=o.reduce((i,h)=>i+h,0);return{labels:["Pemasukan","Pengeluaran"],datasets:[{data:[a,r],backgroundColor:["#13ec5b","#fbbf24"],borderWidth:0,hoverOffset:10}]}}if(m==="pie"){const a=s.reduce((i,h)=>i+h,0),r=o.reduce((i,h)=>i+h,0);return{labels:["Pemasukan","Pengeluaran"],datasets:[{data:[a,r],backgroundColor:["#13ec5b","#fbbf24"],borderWidth:0,hoverOffset:10}]}}return{labels:t,datasets:[{label:"Pemasukan",data:s,backgroundColor:"#13ec5b",borderColor:"#13ec5b",tension:.4,fill:m==="line",pointBackgroundColor:"#13ec5b",borderRadius:8,barThickness:12},{label:"Pengeluaran",data:o,backgroundColor:m==="line"?"#fbbf2488":"#fbbf24",borderColor:"#fbbf24",tension:.4,fill:m==="line",pointBackgroundColor:"#fbbf24",borderRadius:8,barThickness:12}]}},[l,M,m,d,n]),L=j.useMemo(()=>l.filter(t=>{const s=new Date(t.date);return s.getMonth()===d&&s.getFullYear()===n}).sort((t,s)=>new Date(s.date)-new Date(t.date)).slice(0,5),[l,d,n]),P=j.useMemo(()=>{const t=new Date(n,d,1).toISOString().split("T")[0],s=new Date(n,d+1,0).toISOString().split("T")[0],o=[];return f.forEach(a=>{const r=a.startDate||"0000-00-00",i=a.endDate||"9999-12-31";if(r<s&&i>t){const h=l.filter(b=>b.type==="expense"&&b.category===a.category&&b.date>=r&&b.date<=i).reduce((b,v)=>b+Number(v.amount),0);o.push({...a,dynamicSpent:h})}}),o.sort((a,r)=>(a.startDate||"").localeCompare(r.startDate||"")).slice(0,3)},[f,l,d,n]),T={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:m==="pie",position:"bottom",labels:{color:"#94a3b8",font:{size:10,weight:"bold"}}},tooltip:{backgroundColor:"rgba(15, 23, 42, 0.9)",titleFont:{size:10,weight:"bold"},bodyFont:{size:12,weight:"black"},padding:12,cornerRadius:12,displayColors:!1,callbacks:{label:t=>N(t.raw)}}},scales:m==="pie"?{}:{x:{grid:{display:!1},ticks:{color:"#94a3b8",font:{size:10,weight:"bold"}}},y:{display:!1,grid:{display:!1}}}},k=j.useMemo(()=>{if(!l.length)return{percent:0,label:"No Data",isUp:!0};const t=new Date,s=new Date(t.getFullYear(),t.getMonth(),t.getDate()),o=new Date(Math.min(...l.map(u=>new Date(u.date)))),a=Math.ceil((t-o)/(1e3*60*60*24)),r=(u,g)=>l.filter(p=>{const x=new Date(p.date);return x>=u&&x<g}).reduce((p,x)=>x.type==="income"?p+Number(x.amount):x.type==="expense"?p-Number(x.amount):p,0);if(a<7){const u=new Date(s);u.setDate(u.getDate()-1);const g=r(s,new Date(t.getTime()+1)),p=r(u,s);if(p===0)return{percent:g>0?100:0,label:"vs Kemarin",isUp:g>=0};const x=(g-p)/Math.abs(p)*100;return{percent:Math.abs(Math.round(x)),label:"vs Kemarin",isUp:x>=0}}if(a<30){const u=new Date(s);u.setDate(u.getDate()-7);const g=new Date(u);g.setDate(g.getDate()-7);const p=r(u,new Date(t.getTime()+1)),x=r(g,u);if(x===0)return{percent:p>0?100:0,label:"vs Minggu Lalu",isUp:p>=0};const E=(p-x)/Math.abs(x)*100;return{percent:Math.abs(Math.round(E)),label:"vs Minggu Lalu",isUp:E>=0}}const i=new Date(t.getFullYear(),t.getMonth(),1),h=new Date(t.getFullYear(),t.getMonth()-1,1),b=r(i,new Date(t.getTime()+1)),v=r(h,i);if(v===0)return{percent:b>0?100:0,label:"vs Bulan Lalu",isUp:b>=0};const W=(b-v)/Math.abs(v)*100;return{percent:Math.abs(Math.round(W)),label:"vs Bulan Lalu",isUp:W>=0}},[l]),S=t=>{const s=(y+t+(c.length+1))%(c.length+1);U(s)},K=t=>{switch(t==null?void 0:t.toLowerCase()){case"bank":return e.jsx(re,{size:20});case"saving":return e.jsx(ae,{size:20});case"business":return e.jsx(se,{size:20});default:return e.jsx(F,{size:20})}};return e.jsxs("div",{className:"px-6 space-y-8 animate-in fade-in duration-500 overflow-x-hidden pt-4",children:[e.jsxs("section",{className:"relative group",children:[e.jsxs("div",{className:"relative h-[240px] w-full flex items-center justify-center",children:[e.jsx(G,{initial:!1,mode:"wait",children:e.jsx(q.div,{drag:"x",dragConstraints:{left:0,right:0},dragElastic:1,onDragEnd:(t,{offset:s,velocity:o})=>{const a=s.x;a<-50?S(1):a>50&&S(-1)},initial:{x:100,opacity:0,scale:.9},animate:{x:0,opacity:1,scale:1},exit:{x:-100,opacity:0,scale:.9},transition:{type:"spring",stiffness:300,damping:30},className:"absolute inset-0 cursor-grab active:cursor-grabbing",children:y===0?e.jsxs("div",{className:"h-full glass-card rounded-[2.5rem] p-8 relative overflow-hidden flex flex-col justify-between shadow-2xl shadow-primary/10 border-white/5",children:[e.jsx("div",{className:"absolute -top-24 -right-24 size-64 bg-primary/20 blur-[80px] rounded-full"}),e.jsx("div",{className:"absolute -bottom-24 -left-24 size-64 bg-amber-accent/10 blur-[80px] rounded-full"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-[10px] font-bold tracking-[0.2em] uppercase",children:"TOTAL SALDO"}),e.jsx("div",{className:"h-1 w-8 bg-primary mt-1 rounded-full"})]}),e.jsx("div",{className:"size-10 glass-card rounded-xl flex items-center justify-center text-primary border-primary/20",children:e.jsx(F,{size:20})})]}),e.jsx("h2",{className:"text-4xl font-black tracking-tighter mb-2",children:N(J)}),e.jsxs("div",{className:`flex w-fit items-center gap-2 font-bold px-3 py-1 rounded-full border transition-all ${k.isUp?"bg-primary/10 text-primary border-primary/20":"bg-red-500/10 text-red-400 border-red-500/20"}`,children:[k.isUp?e.jsx(O,{size:12,strokeWidth:3}):e.jsx(B,{size:12,strokeWidth:3}),e.jsxs("p",{className:"text-[10px] uppercase truncate",children:[k.percent,"% ",k.isUp?"Grow up":"Down"," ",k.label]})]})]}),e.jsxs("div",{className:"relative z-10 flex gap-4 mt-3",children:[e.jsxs("button",{onClick:C,className:"flex-1 bg-primary text-background-dark font-black py-4 rounded-[1.25rem] flex items-center justify-center gap-2 hover:opacity-90 active:scale-95 transition-all shadow-lg shadow-primary/20 text-[10px] uppercase tracking-wider",children:[e.jsx(H,{size:16,strokeWidth:4})," ISI SALDO"]}),e.jsxs("button",{onClick:w,className:"flex-1 glass-card border-white/10 text-white font-black py-4 rounded-[1.25rem] flex items-center justify-center gap-2 hover:bg-white/5 active:scale-95 transition-all text-[10px] uppercase tracking-wider",children:[e.jsx(O,{size:16,strokeWidth:4})," TRANSFER"]})]})]}):e.jsx(we,{wallet:c[y-1],formatIDR:N,getWalletIcon:K,onIsiSaldo:C,onTransfer:w})},y)}),e.jsx("button",{onClick:()=>S(-1),className:"absolute left-[-15px] z-20 size-10 glass-card rounded-full flex items-center justify-center text-white/50 hover:text-white hover:bg-white/5 sm:flex hidden",children:e.jsx(Q,{size:20})}),e.jsx("button",{onClick:()=>S(1),className:"absolute right-[-15px] z-20 size-10 glass-card rounded-full flex items-center justify-center text-white/50 hover:text-white hover:bg-white/5 sm:flex hidden",children:e.jsx(V,{size:20})})]}),e.jsx("div",{className:"flex justify-center gap-2 mt-6",children:Array.from({length:c.length+1}).map((t,s)=>e.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${y===s?"w-8 bg-primary shadow-[0_0_8px_rgba(19,236,91,0.5)]":"w-2 bg-white/10"}`},s))})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-4 px-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Analisis Keuangan"}),e.jsx("div",{className:"flex bg-white/5 p-1 rounded-xl",children:["week","month","year"].map(t=>e.jsx("button",{onClick:()=>$(t),className:`px-3 py-1.5 text-[10px] font-black uppercase tracking-widest rounded-lg transition-all ${M===t?"bg-primary text-background-dark":"text-slate-400"}`,children:t==="week"?"Minggu":t==="month"?"Bulan":"Tahun"},t))})]}),e.jsx("div",{className:"flex items-center gap-2",children:[{id:"bar",icon:e.jsx(X,{size:14}),label:"Bar"},{id:"line",icon:e.jsx(Y,{size:14}),label:"Line"},{id:"pie",icon:e.jsx(Z,{size:14}),label:"Pie"}].map(t=>e.jsxs("button",{onClick:()=>_(t.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${m===t.id?"bg-white/10 text-white border border-white/20":"text-slate-500 grayscale opacity-50"}`,children:[t.icon," ",t.label]},t.id))})]}),e.jsxs("div",{className:"glass-card p-6 rounded-[2rem] border-white/5 h-[260px] relative overflow-hidden",children:[m==="bar"&&e.jsx(ie,{data:A,options:T}),m==="line"&&e.jsx(ne,{data:A,options:T}),m==="pie"&&e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx("div",{className:"size-48",children:e.jsx(le,{data:A,options:T})})})]})]}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-1",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Progres Anggaran"}),e.jsx("button",{onClick:()=>z("budgets"),className:"text-primary text-[10px] font-black uppercase tracking-widest",children:"Lihat Semua"})]}),e.jsx("div",{className:"flex gap-4 overflow-x-auto no-scrollbar pb-2",children:P.length>0?P.map(t=>e.jsx(ye,{icon:R(t.iconName||"ShoppingBag",20),label:t.category,spent:N(t.dynamicSpent||0),percent:Math.min(Math.round((t.dynamicSpent||0)/t.limit*100),100),color:fe(t.category)},t.id)):e.jsxs("div",{className:"w-full py-8 glass-card rounded-2xl text-center text-slate-500 text-[10px] font-bold uppercase tracking-widest border-white/5 border-dashed border-2",children:["Tidak Ada Anggaran ",I?"Bulan Ini":"Periode Ini"]})})]}),e.jsxs("section",{className:"space-y-4 pb-28",children:[e.jsxs("div",{className:"flex items-center justify-between px-1",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Transaksi Terakhir"}),e.jsx("button",{onClick:D,className:"text-primary text-[10px] font-black uppercase tracking-widest",children:"Lihat Semua"})]}),e.jsxs("div",{className:"space-y-3",children:[L.map(t=>{const s=je(t,f);return e.jsxs("div",{className:"glass-card p-4 rounded-2xl flex items-center justify-between border-white/5 hover:bg-white/5 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"size-12 rounded-xl flex items-center justify-center shadow-md",style:{backgroundColor:`${s.color}1a`,color:s.color},children:R(s.icon,20)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-sm text-slate-100",children:t.note||t.category}),e.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider",children:new Date(t.date).toLocaleDateString("id-ID",{day:"numeric",month:"short"})})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-black text-sm flex items-center justify-end gap-1",style:{color:s.color},children:[t.type==="income"?e.jsx(ee,{size:14,strokeWidth:3}):t.type==="transfer"?e.jsx(te,{size:12}):e.jsx(B,{size:14,strokeWidth:3}),N(t.amount)]})})]},t.id)}),L.length===0&&e.jsxs("div",{className:"text-center py-10 glass-card rounded-2xl text-slate-500 text-[10px] font-bold uppercase tracking-widest border-white/5 border-dashed border-2",children:["Tidak Ada Transaksi ",I?"Bulan Ini":"Periode Ini"]})]})]})]})},we=({wallet:c,formatIDR:l,getWalletIcon:f,onIsiSaldo:d,onTransfer:n})=>{var w,z;const D=["from-blue-600/40 to-indigo-600/10","from-purple-600/40 to-pink-600/10","from-emerald-600/40 to-teal-600/10"],C=(((w=c.id)==null?void 0:w.length)||0)%D.length;return e.jsxs("div",{className:`h-full glass-card rounded-[2.5rem] p-8 relative overflow-hidden flex flex-col justify-between border-2 border-white/5 bg-gradient-to-br ${D[C]}`,children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-200 text-[10px] font-bold tracking-[0.2em] uppercase",children:c.name}),e.jsxs("p",{className:"text-[8px] text-slate-400 font-mono mt-1 opacity-50 tracking-widest",children:["**** ",(z=c.id)==null?void 0:z.slice(-4)]})]}),e.jsx("div",{className:"size-10 bg-white/10 rounded-xl flex items-center justify-center text-white border border-white/10 backdrop-blur-md",children:f(c.type)})]}),e.jsx("h2",{className:"text-4xl font-black tracking-tighter mb-2 text-white",children:l(c.balance)}),e.jsxs("div",{className:"text-[10px] text-slate-300 font-bold uppercase tracking-widest opacity-80",children:[c.type||"Personal"," Wallet"]})]}),e.jsxs("div",{className:"relative z-10 flex gap-4 mt-3",children:[e.jsx("button",{onClick:d,className:"flex-1 bg-white/10 border border-white/10 text-white font-black py-4 rounded-[1.25rem] flex items-center justify-center gap-2 hover:bg-white/20 active:scale-95 transition-all text-[10px] backdrop-blur-md uppercase tracking-wider",children:"ISI SALDO"}),e.jsx("button",{onClick:n,className:"flex-1 bg-white/10 border border-white/10 text-white font-black py-4 rounded-[1.25rem] flex items-center justify-center gap-2 hover:bg-white/20 active:scale-95 transition-all text-[10px] backdrop-blur-md uppercase tracking-wider",children:"TRANSFER"})]})]})},ye=({icon:c,label:l,spent:f,percent:d,color:n})=>e.jsxs("div",{className:"flex-shrink-0 w-48 glass-card rounded-2xl p-5 border-white/5 shadow-lg",children:[e.jsx("div",{className:"size-12 rounded-xl flex items-center justify-center mb-4 transition-transform hover:scale-110",style:{backgroundColor:`${n}1a`,color:n},children:c}),e.jsx("p",{className:"font-bold text-sm mb-1 truncate",children:l}),e.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 mb-3 font-bold uppercase tracking-wider",children:[e.jsx("span",{children:f}),e.jsxs("span",{children:[d,"%"]})]}),e.jsx("div",{className:"h-1.5 w-full bg-white/5 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full transition-all duration-1000",style:{width:`${d}%`,backgroundColor:n,boxShadow:`0 0 10px ${n}80`}})})]});export{ze as default};
